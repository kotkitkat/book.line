<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Спойлеры — все книги</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%231e2a47' d='M20 25v50l30-15 30 15V25L50 10 20 25z'/%3E%3Cpath fill='%23b68b40' d='M20 75l30-15 30 15-30 15-30-15z'/%3E%3C/svg%3E">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header__inner">
                <a href="index.html" class="logo">
                    <i class="fas fa-book-open"></i> Спойлеры
                </a>
                <nav class="nav" id="nav">
                    <ul class="nav__list">
                        <li><a href="index.html" class="nav__link active">Библиотека</a></li>
                        <li><a href="favorites.html" class="nav__link">Моя полка</a></li>
                        <li><a href="add.html" class="nav__link">Добавить книгу</a></li>
                    </ul>
                </nav>
                <button class="burger" id="burger" aria-label="Меню">
                    <span></span><span></span><span></span>
                </button>
            </div>
        </div>
    </header>

    <main>
        <section class="books">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Все книги</h2>
                    <p class="section-subtitle">Есть книги, где первая строчка — это уже финал, просто мы об этом еще не знаем</p>
                </div>

                <!-- Панель поиска и фильтров -->
                <div class="search-panel">
                    <div class="search-row">
                        <div class="search-wrapper">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" id="searchInput" class="form-control search-input" 
                                   placeholder="Поиск по названию или автору...">
                            <button id="clearFiltersBtn" class="btn-clear" title="Сбросить всё">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="filters-row">
                        <select id="authorFilter" class="form-control filter-select">
                            <option value="">Все авторы</option>
                        </select>
                        
                        <select id="ratingFilter" class="form-control filter-select">
                            <option value="0">Любой рейтинг</option>
                            <option value="5">От 5 ☕</option>
                            <option value="7">От 7 ☕</option>
                            <option value="9">От 9 ☕</option>
                        </select>
                        
                        <button id="favoriteFilterBtn" class="btn-filter-fav" title="Только избранное">
                            <i class="fas fa-star"></i>
                        </button>
                    </div>
                    
                    <div class="sort-row">
                        <span class="sort-label">Сортировать:</span>
                        <select id="sortBySelect" class="form-control sort-select">
                            <option value="title">По названию</option>
                            <option value="rating">По рейтингу</option>
                            <option value="date">По дате добавления</option>
                        </select>
                        
                        <button id="sortOrderBtn" class="btn-sort-order" title="Направление сортировки">
                            <i class="fas fa-arrow-up"></i>
                        </button>
                    </div>
                </div>

                <!-- Контейнер для книг и пагинации -->
                <div id="booksContainer" class="books__grid"></div>
            </div>
        </section>
    </main>

    <!-- Модальное окно редактирования -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Редактировать книгу</h2>
            <form id="editForm">
                <input type="hidden" id="edit-id">
                <div class="form-group">
                    <label class="form-label">Название</label>
                    <input type="text" id="edit-title" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Автор</label>
                    <input type="text" id="edit-author" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Первая строка</label>
                    <textarea id="edit-firstLine" class="form-control" rows="2" required></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Последняя строка</label>
                    <textarea id="edit-lastLine" class="form-control" rows="2" required></textarea>
                </div>
                <button type="submit" class="btn btn--primary">Сохранить</button>
            </form>
        </div>
    </div>

    <!-- Модальное окно добавления цитаты (старое, но оставим для совместимости) -->
    <div id="quoteModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Добавить цитату</h2>
            <form id="quoteForm">
                <input type="hidden" id="quote-book-id">
                <div class="form-group">
                    <label class="form-label">Цитата</label>
                    <textarea id="quote-text" class="form-control" rows="3" required></textarea>
                </div>
                <button type="submit" class="btn btn--primary">Сохранить</button>
            </form>
        </div>
    </div>

    <!-- Модальное окно для всех цитат -->
    <div id="quotesModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Цитаты из книги <span id="quotesBookTitle"></span></h2>
            <div id="quotesListContainer" class="quotes-list-container" style="max-height: 300px; overflow-y: auto; margin: 20px 0;">
                <!-- сюда будет подгружаться список цитат -->
            </div>
            <div class="form-group">
                <label class="form-label">Новая цитата</label>
                <textarea id="newQuoteText" class="form-control" rows="3" placeholder="Введите цитату..."></textarea>
                <div style="display: flex; gap: 10px; margin-top: 15px;">
                    <button id="addQuoteBtn" class="btn btn--primary">Добавить</button>
                    <button id="closeQuotesModalBtn" class="btn btn--outline">Закрыть</button>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer__inner">
                <p class="footer__copy">© 2026 Спойлеры. Первые и последние строки.</p>
                <div class="footer__social">
                    <a href="https://t.me/timofkot" title="Telegram"><i class="fab fa-telegram"></i></a>
                    <a href="mailto:gera.pirat@mail.ru" title="Написать письмо"><i class="fas fa-envelope"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
  

    <!-- Лоадер: дымящаяся чашка чая -->
    <div id="loader">
        <div class="tea-loader">
            <div class="cup">
                <i class="fas fa-mug-hot"></i>
                <div class="steam">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </div>
</body>
</html>